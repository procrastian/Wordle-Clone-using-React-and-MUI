import React, { Component } from "react";
import { render } from "react-dom";
import Keyboard from "react-simple-keyboard";
import "react-simple-keyboard/build/css/index.css";

export default function KeyboardApp() {
  class App extends Component {
    state = {
      layoutName: "default",
      input: "",
    };

    onChange = (input) => {
      this.setState({
        input: input,
      });
      console.log("Input changed", input);
    };

    onKeyPress = (button) => {
      console.log("Button pressed", button);

      /**
       * If you want to handle the shift and caps lock buttons
       */
      if (button === "{shift}" || button === "{lock}") this.handleShift();
    };

    handleShift = () => {
      let layoutName = this.state.layoutName;

      this.setState({
        layoutName: layoutName === "default" ? "shift" : "default",
      });
    };

    onChangeInput = (event) => {
      let input = event.target.value;
      this.setState(
        {
          input: input,
        },
        () => {
          this.keyboard.setInput(input);
        }
      );
    };

    render() {
      return (
        <div>
          <input
            value={this.state.input}
            placeholder={"Tap on the virtual keyboard to start"}
            onChange={(e) => this.onChangeInput(e)}
          />
          <Keyboard
            keyboardRef={(r) => (this.keyboard = r)}
            onChange={(input) => this.onChange(input)}
            onKeyPress={(button) => this.onKeyPress(button)}
            theme={"hg-theme-default hg-layout-default myTheme"}
            layoutName={this.state.layoutName}
            layout={{
              default: [
                "q w e r t y u i o p",
                "a s d f g h j k l",
                "{enter} z x c v b n m {bksp}",
              ],
              shift: [
                "~ ! @ # $ % ^ & * ( ) _ + {bksp}",
                "{tab} Q W E R T Y U I O P { } |",
                '{lock} A S D F G H J K L : " {enter}',
                "{shift} Z X C V B N M < > ? {shift}",
                ".com @ {space}",
              ],
            }}
            buttonTheme={[
              {
                class: "hg-red",
                buttons: "Q W E R T Y q w e r t y",
              },
              {
                class: "hg-highlight",
                buttons: "Q q",
              },
            ]}
          />
        </div>
      );
    }
  }

  render(<App />, document.getElementById("root"));
}
